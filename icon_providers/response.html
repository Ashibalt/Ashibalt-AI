<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–∞–ª–µ—Ä–µ—è —Ü–≤–µ—Ç–æ–≤ SVG</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 30px;
        }
        h1 {
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
            justify-items: center;
            margin-top: 30px;
        }
        .thumbnail {
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
            border: 2px solid transparent;
            border-radius: 8px;
            padding: 10px;
            background: #fafafa;
        }
        .thumbnail:hover {
            transform: scale(1.05);
            border-color: #007bff;
            background: #fff;
        }
        canvas {
            display: block;
            margin: 0 auto 10px;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .caption {
            font-size: 12px;
            color: #555;
            word-break: break-all;
        }
        .info {
            margin-top: 30px;
            padding: 15px;
            background-color: #e7f3ff;
            border-left: 4px solid #007bff;
            border-radius: 0 5px 5px 0;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® –ì–∞–ª–µ—Ä–µ—è —Ü–≤–µ—Ç–æ–≤ SVG</h1>
        <p class="subtitle">–î–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã —Ü–≤–µ—Ç–æ–≤ ‚Äî –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞: —Ñ–∏–≥—É—Ä–∫–∞/—Ñ–æ–Ω. –ö–ª–∏–∫–Ω–∏—Ç–µ, —á—Ç–æ–±—ã —Å–∫–∞—á–∞—Ç—å PNG 128x128.</p>

        <div id="gallery" class="gallery"></div>

        <div class="info">
            <p><strong>–¶–≤–µ—Ç–æ–≤—ã–µ –ø–∞—Ä—ã:</strong> –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ –≤ –º–∞—Å—Å–∏–≤ <code>colorPairs</code> –≤ –∫–æ–¥–µ. SVG –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç—Å—è –æ—Ç –±–µ–ª–æ–≥–æ —Ñ–æ–Ω–∞, —Ñ–∏–≥—É—Ä–∫–∞ –ø–µ—Ä–µ–∫—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –≤ –∑–∞–¥–∞–Ω–Ω—ã–π —Ü–≤–µ—Ç.</p>
        </div>
    </div>

    <script>
        (function() {
            // ---------- –ò—Å—Ö–æ–¥–Ω—ã–π SVG (–≤–∞—à –ª–æ–≥–æ—Ç–∏–ø) ----------
            const DEFAULT_SVG = `<svg width="48" height="48" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0)">
<path d="M30 60C46.5685 60 60 46.5685 60 30C60 13.4315 46.5685 0 30 0C13.4315 0 0 13.4315 0 30C0 46.5685 13.4315 60 30 60Z" fill="white"/>
<path d="M30 36.36C33.5143 36.36 36.36 33.5143 36.36 30C36.36 26.4857 33.5143 23.64 30 23.64C26.4857 23.64 23.64 26.4857 23.64 30C23.64 33.5143 26.4857 36.36 30 36.36Z" fill="gray"/>
<path d="M36.16 14.88L30.32 0.76L24.36 14.88C24.36 14.88 30.16 12.28 36.16 14.88Z" fill="gray"/>
<path d="M15.4 23.2C15.4 23.2 17.68 17.32 23.96 14.68L9.56 9.2L15.4 23.2Z" fill="gray"/>
<path d="M58.04 29.16L44.32 23.2C44.32 23.2 47.36 29.08 44.72 35.36L58.04 29.16Z" fill="gray"/>
<path d="M44.16 23.24L50.12 8.84L35.92 14.76C35.92 14.76 41.8 17 44.16 23.24Z" fill="gray"/>
<path d="M24.4 45.04L30.24 59.16L36.16 45.04C36.16 45.04 30.36 47.64 24.4 45.04Z" fill="gray"/>
<path d="M35.96 44.88L50.36 50.36L44.52 36.36C44.52 36.36 42.24 42.24 35.96 44.88Z" fill="gray"/>
<path d="M2 30.04L15.72 36C15.72 36 12.68 30.12 15.32 23.84L2 30.04Z" fill="gray"/>
<path d="M15.8 36.32L9.92 50.76L24.04 44.8C24.04 44.8 18.12 42.56 15.8 36.32Z" fill="gray"/>
</g>
<defs>
<clipPath id="clip0">
<rect width="60" height="60" fill="white"/>
</clipPath>
</defs>
</svg>`;

            // ---------- –°–ø–∏—Å–æ–∫ —Ü–≤–µ—Ç–æ–≤—ã—Ö –ø–∞—Ä (–º–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω—è—Ç—å) ----------
            const colorPairs = [
                { color1: '#FFFF00', color2: '#FF0000' }, // –∂—ë–ª—Ç—ã–π / –∫—Ä–∞—Å–Ω—ã–π
                { color1: '#00FF00', color2: '#0000FF' }, // –∑–µ–ª—ë–Ω—ã–π / —Å–∏–Ω–∏–π
                { color1: '#FFA500', color2: '#800080' }, // –æ—Ä–∞–Ω–∂–µ–≤—ã–π / —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π
                { color1: '#FFC0CB', color2: '#000000' }, // —Ä–æ–∑–æ–≤—ã–π / —á—ë—Ä–Ω—ã–π
                { color1: '#40E0D0', color2: '#8B4513' }, // –±–∏—Ä—é–∑–æ–≤—ã–π / –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π
                { color1: '#FFD700', color2: '#2E8B57' }, // –∑–æ–ª–æ—Ç–æ–π / –º–æ—Ä—Å–∫–æ–π –∑–µ–ª—ë–Ω—ã–π
                { color1: '#DC143C', color2: '#FFFFF0' }, // –º–∞–ª–∏–Ω–æ–≤—ã–π / —Å–ª–æ–Ω–æ–≤–∞—è –∫–æ—Å—Ç—å
                { color1: '#4B0082', color2: '#FFE4E1' }, // –∏–Ω–¥–∏–≥–æ / —Ä–æ–∑–æ–≤—ã–π
            ];

            // ---------- –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –±–µ–ª–æ–≥–æ —Ñ–æ–Ω–∞ –∏–∑ SVG (path —Å fill="white" –≤–Ω–µ defs) ----------
            function removeWhiteFills(svgText) {
                const parser = new DOMParser();
                const doc = parser.parseFromString(svgText, 'image/svg+xml');
                const svgRoot = doc.documentElement;
                const paths = svgRoot.querySelectorAll('path');
                paths.forEach(path => {
                    let parent = path.parentNode;
                    let insideDefs = false;
                    while (parent) {
                        if (parent.tagName === 'defs') {
                            insideDefs = true;
                            break;
                        }
                        parent = parent.parentNode;
                    }
                    if (!insideDefs && path.getAttribute('fill') === 'white') {
                        path.remove();
                    }
                });
                return new XMLSerializer().serializeToString(svgRoot);
            }

            // ---------- –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫—Ä–∞—à–∏–≤–∞–Ω–∏—è –≤—Å–µ—Ö fill (–∫—Ä–æ–º–µ defs) –≤ –∑–∞–¥–∞–Ω–Ω—ã–π —Ü–≤–µ—Ç ----------
            function recolorSvg(svgText, fillColor) {
                // –°–Ω–∞—á–∞–ª–∞ —É–¥–∞–ª–∏–º –±–µ–ª—ã–π —Ñ–æ–Ω, —á—Ç–æ–±—ã –æ–Ω –Ω–µ –º–µ—à–∞–ª
                const withoutWhite = removeWhiteFills(svgText);
                // –¢–µ–ø–µ—Ä—å –∑–∞–º–µ–Ω–∏–º –≤—Å–µ fill –Ω–∞ –Ω—É–∂–Ω—ã–π —Ü–≤–µ—Ç (–≤–Ω–µ defs)
                const parser = new DOMParser();
                const doc = parser.parseFromString(withoutWhite, 'image/svg+xml');
                const svgRoot = doc.documentElement;

                // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —ç–ª–µ–º–µ–Ω—Ç –≤–Ω—É—Ç—Ä–∏ defs
                function isInsideDefs(element) {
                    let parent = element.parentNode;
                    while (parent) {
                        if (parent.tagName === 'defs') return true;
                        parent = parent.parentNode;
                    }
                    return false;
                }

                // –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—Ö–æ–¥–∏–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –º–µ–Ω—è–µ–º fill
                const allElements = svgRoot.querySelectorAll('*');
                allElements.forEach(el => {
                    if (isInsideDefs(el)) return; // –Ω–µ —Ç—Ä–æ–≥–∞–µ–º defs
                    if (el.hasAttribute('fill')) {
                        el.setAttribute('fill', fillColor);
                    }
                    // –ï—Å–ª–∏ fill –Ω–µ –∑–∞–¥–∞–Ω, –Ω–æ –µ—Å—Ç—å style, –ø–æ–ø—Ä–æ–±—É–µ–º –∑–∞–º–µ–Ω–∏—Ç—å –≤ style (—É–ø—Ä–æ—â—ë–Ω–Ω–æ)
                    // –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º style, —Ç–∞–∫ –∫–∞–∫ –≤ SVG –∏—Ö –Ω–µ—Ç
                });

                // –¢–∞–∫–∂–µ –¥–æ–±–∞–≤–∏–º preserveAspectRatio –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
                if (!svgRoot.hasAttribute('preserveAspectRatio')) {
                    svgRoot.setAttribute('preserveAspectRatio', 'xMidYMid meet');
                }

                return new XMLSerializer().serializeToString(svgRoot);
            }

            // ---------- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ü–≤–µ—Ç–∞ –≤ HEX (–µ—Å–ª–∏ —ç—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ) ----------
            function colorToHex(color) {
                // –ï—Å–ª–∏ —É–∂–µ HEX, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–∞–∫ –µ—Å—Ç—å (–±–µ–∑ —Ä–µ—à—ë—Ç–∫–∏)
                if (color.startsWith('#')) return color.substring(1).toUpperCase();
                // –í—Ä–µ–º–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –≤ HEX
                const ctx = document.createElement('canvas').getContext('2d');
                ctx.fillStyle = color;
                const hex = ctx.fillStyle; // –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ü–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ #rrggbb
                return hex.substring(1).toUpperCase();
            }

            // ---------- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏–Ω–∏–∞—Ç—é—Ä—ã –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥–∞–ª–µ—Ä–µ—é ----------
            function createThumbnail(container, fillColor, bgColor, variantName) {
                const thumbDiv = document.createElement('div');
                thumbDiv.className = 'thumbnail';

                const canvas = document.createElement('canvas');
                canvas.width = 128;
                canvas.height = 128;
                thumbDiv.appendChild(canvas);

                const caption = document.createElement('div');
                caption.className = 'caption';
                caption.textContent = variantName;
                thumbDiv.appendChild(caption);

                container.appendChild(thumbDiv);

                // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ SVG —Å –ø–µ—Ä–µ–∫—Ä–∞—Å–∫–æ–π
                const recoloredSvg = recolorSvg(DEFAULT_SVG, fillColor);
                const blob = new Blob([recoloredSvg], { type: 'image/svg+xml' });
                const url = URL.createObjectURL(blob);

                const img = new Image();
                img.onload = function() {
                    // –†–∏—Å—É–µ–º —Ñ–æ–Ω
                    const ctx = canvas.getContext('2d');
                    ctx.fillStyle = bgColor;
                    ctx.fillRect(0, 0, 128, 128);

                    // –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º SVG, —á—Ç–æ–±—ã –≤–ø–∏—Å–∞—Ç—å –≤ –∫–≤–∞–¥—Ä–∞—Ç —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏
                    const scale = 0.9; // 90% –æ—Ç –º–µ–Ω—å—à–µ–π —Å—Ç–æ—Ä–æ–Ω—ã
                    const maxDim = Math.min(128, 128) * scale;
                    const targetWidth = img.width * (maxDim / Math.max(img.width, img.height));
                    const targetHeight = img.height * (maxDim / Math.max(img.width, img.height));
                    const x = (128 - targetWidth) / 2;
                    const y = (128 - targetHeight) / 2;

                    ctx.drawImage(img, x, y, targetWidth, targetHeight);

                    // –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º URL
                    URL.revokeObjectURL(url);
                };
                img.src = url;

                // –ü—Ä–∏ –∫–ª–∏–∫–µ —Å–∫–∞—á–∏–≤–∞–µ–º PNG
                thumbDiv.addEventListener('click', function() {
                    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å canvas, –Ω–æ –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–¥–∏–º –Ω–æ–≤—ã–π)
                    const downloadCanvas = document.createElement('canvas');
                    downloadCanvas.width = 128;
                    downloadCanvas.height = 128;
                    const downloadCtx = downloadCanvas.getContext('2d');

                    // –†–∏—Å—É–µ–º —Ñ–æ–Ω
                    downloadCtx.fillStyle = bgColor;
                    downloadCtx.fillRect(0, 0, 128, 128);

                    // –ó–∞–≥—Ä—É–∂–∞–µ–º SVG –∑–∞–Ω–æ–≤–æ (—á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å—é)
                    const downloadImg = new Image();
                    downloadImg.onload = function() {
                        const scale = 0.9;
                        const maxDim = 128 * scale;
                        const targetWidth = downloadImg.width * (maxDim / Math.max(downloadImg.width, downloadImg.height));
                        const targetHeight = downloadImg.height * (maxDim / Math.max(downloadImg.width, downloadImg.height));
                        const x = (128 - targetWidth) / 2;
                        const y = (128 - targetHeight) / 2;
                        downloadCtx.drawImage(downloadImg, x, y, targetWidth, targetHeight);

                        // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ
                        const link = document.createElement('a');
                        const hexFill = colorToHex(fillColor);
                        const hexBg = colorToHex(bgColor);
                        link.download = `svg_${hexFill}_on_${hexBg}.png`;
                        link.href = downloadCanvas.toDataURL('image/png');
                        link.click();

                        URL.revokeObjectURL(url);
                    };
                    downloadImg.src = url; // –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ blob, —á—Ç–æ —É–∂–µ —Å–æ–∑–¥–∞–Ω
                });
            }

            // ---------- –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –≥–∞–ª–µ—Ä–µ–∏ ----------
            const gallery = document.getElementById('gallery');

            colorPairs.forEach(pair => {
                const { color1, color2 } = pair;
                // –í–∞—Ä–∏–∞–Ω—Ç 1: —Ñ–∏–≥—É—Ä–∫–∞ = color1, —Ñ–æ–Ω = color2
                createThumbnail(gallery, color1, color2, `${color1} –Ω–∞ ${color2}`);
                // –í–∞—Ä–∏–∞–Ω—Ç 2: —Ñ–∏–≥—É—Ä–∫–∞ = color2, —Ñ–æ–Ω = color1
                createThumbnail(gallery, color2, color1, `${color2} –Ω–∞ ${color1}`);
            });
        })();
    </script>
</body>
</html>